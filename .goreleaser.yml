# This is an example goreleaser.yaml file with some sane defaults.
# Make sure to check the documentation at http://goreleaser.com
before:
  hooks:
    # You may remove this if you don't use go modules.
    - go mod download
    # you may remove this if you don't need go generate
    - go generate ./...
archives:
- id: eru-barrel
  replacements:
    386: ia32
  files:
  - eru-barrel.service
  - barrel.conf
  - install.sh
  - README.md

checksum:
  name_template: 'checksums.txt'
snapshot:
  name_template: "{{ .Tag }}-next"
changelog:
  sort: asc
  filters:
    exclude:
    - '^docs:'
    - '^test:'
builds:
-
  # ID of the build.
  # Defaults to the project name.
  id: "eru-barrel"

  # Path to project's (sub)directory containing Go code.
  # This is the working directory for the Go build command(s).
  # Default is `.`.
  dir: ./

  # Path to main.go file or main package.
  # Default is `.`.
  main: ./barrel.go

  # Binary name.
  # Can be a path (e.g. `bin/app`) to wrap the binary in a directory.
  # Default is the name of the project directory.
  binary: eru-barrel

  # Custom flags templates.
  # Default is empty.
  # flags:
  #   - -tags=dev
  #   - -v

  # Custom asmflags templates.
  # Default is empty.
  # asmflags:
  #   - -D mysymbol
  #   - all=-trimpath={{.Env.GOPATH}}

  # Custom gcflags templates.
  # Default is empty.
  # gcflags:
  #   - all=-trimpath={{.Env.GOPATH}}
  #   - ./dontoptimizeme=-N

  # Custom ldflags templates.
  # Default is `-s -w -X main.version={{.Version}} -X main.commit={{.Commit}} -X main.date={{.Date}} -X main.builtBy=goreleaser`.
  ldflags:
  - -s -w

  # Custom environment variables to be set during the builds.
  # Default is empty.
  env:
  - CGO_ENABLED=0

  # GOOS list to build for.
  # For more info refer to: https://golang.org/doc/install/source#environment
  # Defaults are darwin and linux.
  goos:
  - linux

  # GOARCH to build for.
  # For more info refer to: https://golang.org/doc/install/source#environment
  # Defaults are 386 and amd64.
  goarch:
  - amd64

  # Hooks can be used to customize the final binary,
  # for example, to run generators.
  # Those fields allow templates.
  # Default is both hooks empty.
  # hooks:
    # pre: rice embed-go
    # post: ./script.sh {{ .Path }}

  # If true, skip the build.
  # Useful for library projects.
  # Default is false
  skip: false

release:
  prerelease: auto